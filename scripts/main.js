"use strict";var APP={mediaBreakpoint:{sm:576,md:768,lg:992,xl:1200},cache:{},initBefore:function(){APP.polyfills(),APP.svgIcons(),document.documentElement.className=document.documentElement.className.replace("no-js","js")},init:function(){APP.detectIE(),APP.lazyload(),APP.objectFitFallback(document.querySelectorAll("[data-object-fit]")),new APP.Mask(".js-tel").init(),APP.buttons(),APP.closeOnFocusLost(),APP.setCurrentPosition(),APP.mapOptions(),APP.setFixedCoordsForm(),APP.tooltipsInit(),APP.mouseOverMap(),APP.modalGallery()},initOnLoad:function(){APP.truncateText(document.querySelectorAll(".js-dot"))},getClipboardText:function(e){navigator.clipboard.readText().then(function(t){e(t)}).catch(function(t){console.warn("Failed to read clipboard contents: ",t)})},parseGameCoords:function(t){return t.replace(/(?:\r\n|\r|\n)/g," ").match(/Lat\: (-?\d+).+Long\: (-?\d+)/i)},buttons:function(){Array.prototype.forEach.call(document.querySelectorAll(".menu-trigger"),function(t){t.addEventListener("click",function(){document.body.classList.toggle("nav-showed")})});var t=document.querySelector(".js-ctrl-v");if(t){var n=document.getElementById("lat"),o=document.getElementById("lng"),i=function(t){var e=APP.parseGameCoords(t);e?(APP.cache.tingleModal&&APP.cache.tingleModal.close(),n.value=e[1],o.value=e[2],o.closest("form").querySelector("button[type=submit]").click()):APP.customAlert('\n\t\t\t\t\t\t<div class="content-style text-center">\n\t\t\t\t\t\t\t<div class="h1 mb-4">Invalid clypboard text</div>\n\t\t\t\t\t\t\t<p>Youre text is: <b>"'+t+'"</b></p>\n\t\t\t\t\t\t\t<p>Please copy in-game coordinates or use the form</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t')},e=function(e){navigator.permissions.query({name:"clipboard-read"}).then(function(t){"granted"==t.state||"prompt"==t.state?e():APP.customAlert('\n\t\t\t\t\t<form id="pasted-coords">\n\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col form-group">\n\t\t\t\t\t\t\t\t<input type="text" class="form-control form-control--light-bg" name="in-game-coords" placeholder="Paste in-game coords" required="">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="col-auto form-group">\n\t\t\t\t\t\t\t\t<button class="btn btn--narrow btn--blue" type="submit">Set</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t\t<div class="content-style text-center">\n\t\t\t\t\t\t<p>Please grant access clipboard read permissions for faster setting points or just use the form.</p>\n\t\t\t\t\t</div>\n\t\t\t\t',function(t){var n=t.modal.querySelector("input[name=in-game-coords]");n.focus(),document.getElementById("pasted-coords").addEventListener("submit",function(t){t.preventDefault();var e=n.value;i(e)})})})};t.addEventListener("click",function(t){t.preventDefault(),e(function(){APP.getClipboardText(i)})})}APP.modalCloseBtn()},customAlert:function(t,e,n){var o,i=function(t,e){t.setContent('<div class ="modal modal--alert">\n\t\t\t\t<span class="js-modal-close modal__close">×</span>\n\t\t\t\t'+e+"\n\t\t\t</div>")};APP.cache.tingleModal?i(APP.cache.tingleModal,t):(APP.cache.tingleModal=o=new tingle.modal({closeMethods:["overlay","button","escape"],closeLabel:"Close",cssClass:["tingle-modal--alert"],beforeOpen:function(){document.body.style.marginRight=APP.getScrollbarSize()+"px"},onOpen:function(){document.activeElement.blur(),APP.modalCloseListener(this),e&&e(this)},beforeClose:function(){return document.body.removeAttribute("style"),!0},onClose:function(){o.destroy(),delete APP.cache.tingleModal,n&&n(this)}}),i(APP.cache.tingleModal,t),APP.cache.tingleModal.open())},closeOnFocusLost:function(){document.addEventListener("click",function(t){t.target.closest(".header")||document.body.classList.remove("nav-showed")})},tooltipsInit:function(){tippy("[data-tippy-content]",{animation:"fade",arrow:!0,arrowType:"round"});Array.prototype.forEach.call(document.querySelectorAll(".js-tooltip"),function(t){var e=t.querySelector(".js-tooltip-content");tippy(t,{content:e,theme:"light-border",interactive:!0,arrow:!0,trigger:"click",arrowType:"round"}),e.classList.remove("d-none")})},mapOptions:function(){var t=document.querySelector(".map-settings form"),n=document.querySelector(".map"),o="map--hide-markers",i="map--invisible-markers";t&&Array.prototype.forEach.call(t.querySelectorAll("input"),function(e){e.addEventListener("change",function(t){switch(e.getAttribute("name")){case"hidden-markers":e.checked?n.classList.add(o):n.classList.remove(o);break;case"invisible-markers":e.checked?n.classList.add(i):n.classList.remove(i);break;default:console.log("options switched")}})})},pos2loc:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.01,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.01,n="thenyaw"===(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"thenyaw")?700:1600;return{left:parseInt(n/100*(t-50)),top:parseInt(n/100*(e-50))}},loc2pos:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.01,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.01,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"thenyaw",o=void 0,i=void 0;return"thenyaw"===n?(o=0<=t?.149:.138,i=0<=e?.146:.157):"v3"===n&&(o=0<=t?.08:.06,i=0<=e?.05:.08),{left:50+t*o,top:50+e*i}},setCurrentPosition:function(){var d=document.querySelector(".js-coords-form");if(d){var u=document.querySelector("[data-map-name]").getAttribute("data-map-name");d.addEventListener("submit",function(t){t.preventDefault();var e,n,o,i,a=document.querySelector(".js-player-marker"),l=1*d.querySelector('input[name="lat"]').value,r=1*d.querySelector('input[name="lng"]').value,c=APP.loc2pos(l,r,u);if(a.classList.add("d-none"),100<c.left||100<c.top||c.top<0||c.left<0)APP.customAlert('\n\t\t\t\t\t<div class="h2 mb-0 text-center">\n\t\t\t\t\t\t<p>Unfortunately, it is not possible to set a point as it is outside the map.</p>\n\t\t\t\t\t</div>\n\t\t\t\t'),console.log(c);else{var s=new SmoothScroll;a.classList.remove("d-none"),a.style.left=c.left+"%",a.style.top=c.top+"%",n=l,o=r,i=(i=(e=a).getAttribute("data-tippy-content").replace("{{ lat }}",n)).replace("{{ lng }}",o),e._tippy.setContent(i),s.animateScroll(a,0,{speed:500,offset:function(t){return window.innerHeight/2}})}})}},setFixedCoordsForm:function(){var t=document.querySelector(".js-coords-form");if(t){var e=window.pageYOffset+t.getBoundingClientRect().top;new Headroom(t,{offset:e}).init()}},mouseOverMap:function(){var t=document.querySelector(".map__layout");if(t){var u=t.getAttribute("data-map-name"),m=document.getElementById("position");t.onmousemove=function(t){var e,n,o,i,a,l,r,c,s=(n=(e=t).target.getBoundingClientRect(),o=e.clientX-n.left,i=e.clientY-n.top,a=e.target.offsetWidth,l=e.target.offsetHeight,r=parseInt(o/a*100*10)/10,c=parseInt(i/l*100*10)/10,{x:r,y:c}),d=APP.pos2loc(s.x,s.y,u);m.innerHTML="lat: "+d.left+", long: "+d.top,m.style.display="block",m.style.top=s.y+"%",m.style.left=s.x+"%"},t.onmouseleave=function(){m.style.top=0,m.style.left=0,m.style.display="none"}}},Mask:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__";this.elements=document.querySelectorAll(t),this.init=function(){e(this.elements)};var e=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.addEventListener("input",o,!1),n.addEventListener("focus",o,!1),n.addEventListener("blur",o,!1)}},o=function(t){var e=a,n=0,o=e.replace(/\D/g,""),i=this.value.replace(/\D/g,"");o.length>=i.length&&(i=o),this.value=e.replace(/./g,function(t){return/[_\d]/.test(t)&&n<i.length?i.charAt(n++):n>=i.length?"":t}),"blur"==t.type?2==this.value.length&&(this.value=""):function(t,e){if(e.focus(),e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}(this.value.length,this)}},modalCloseBtn:function(t){APP.documentOn("click",".js-modal-close",function(t){t.preventDefault(),APP.cache.tingleModal&&APP.cache.tingleModal.close()})},modalCloseListener:function(e){e.modalBoxContent.addEventListener("click",function(t){t.target==e.modalBoxContent&&e.close()})},modalGallery:function(){var n,i=function(t){t.closest(".tippy-popper")._tippy.hide()},a=function(t){var e=t.closest(".js-gallery"),n=[];return Array.prototype.forEach.call(e.querySelectorAll(".js-gallery-item"),function(t,e){!t.closest(".swiper-slide-duplicate")&&n.push(t)}),n},l=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n],i=o.getAttribute("data-title")?o.getAttribute("data-title"):"";e.push({src:o.getAttribute("href"),title:i})}return e},r=function(t,a){var e=new tingle.modal({closeMethods:["overlay","button","escape"],closeLabel:"Close",cssClass:["tingle-modal--gallery"],beforeOpen:function(){document.body.style.marginRight=APP.getScrollbarSize()+"px"},onOpen:function(){document.activeElement.blur(),APP.modalCloseListener(this);var t,e,n,o,i=this.modal.querySelector(".swiper-container");(e=function(t){var e=t.el.querySelector(".swiper-slide-active img").getAttribute("data-title");t.el.closest(".modal-gallery").querySelector(".modal-gallery__title").innerHTML=e},n=(t=i).querySelectorAll(".swiper-slide").length,(o=new Swiper(t,{loop:1<n,allowTouchMove:!1,lazy:{loadPrevNext:!0,loadOnTransitionStart:!0},effect:"fade",fadeEffect:{crossFade:!0},speed:200,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},keyboard:{enabled:!0},pagination:{el:".modal-gallery__paging",type:"fraction"},init:!1})).on("init",function(){var t=this;setTimeout(function(){e(t)},10)}),o.on("slideChange",function(){var t=this;setTimeout(function(){e(t)},10)}),o.on("lazyImageReady",function(t,e){var n=this.$el[0].querySelectorAll("[data-object-fit]");APP.objectFitFallback(n)}),o.init(),Array.prototype.forEach.call(t.querySelectorAll("img"),function(t){t.addEventListener("click",function(t){o.slideNext()})}),o).slideTo(a)},beforeClose:function(){return document.body.removeAttribute("style"),!0},onClose:function(){e.destroy(),delete APP.cache.tingleModal}});(APP.cache.tingleModal=e).setContent(t),e.open()},d=function(t){var e=document.createElement("div");return e.innerHTML=t.trim(),e.firstChild},u="outerHTML"in(n=document.createElement("div"))?function(t){return t.outerHTML}:function(t){var e=n.cloneNode();return e.appendChild(t.cloneNode(!0)),e.innerHTML};APP.documentOn("click",".js-gallery-item",function(t){t.preventDefault(),i(this);var e=a(this),n=e.indexOf(this)+1,o=function(t,e){var n=d(t),o=n.querySelector("[data-for]"),i=o.parentNode;o.removeAttribute("data-for"),i.removeChild(o);for(var a=0;a<e.length;a++){var l=e[a],r=u(o),c=d(r),s=c.querySelector("img");s.setAttribute("data-src",l.src),s.setAttribute("data-title",l.title),i.appendChild(c)}return n}('<div class="modal-gallery">\n\t\t\t<span class="js-modal-close modal__close modal__close--pos-gallery">×</span>\n\t\t\t<div class="swiper-container modal-gallery__slider">\n\t\t\t\t<div class="swiper-wrapper">\n\t\t\t\t\t<div class="modal-gallery__slide swiper-slide" data-for>\n\t\t\t\t\t\t<div class="responsive-img modal-gallery__img-wrap">\n\t\t\t\t\t\t\t<img class="swiper-lazy" alt="" data-object-fit="scale-down">\n\t\t\t\t\t\t\t<div class="swiper-lazy-preloader swiper-lazy-preloader-white"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="swiper-button-prev"></div>\n\t\t\t\t<div class="swiper-button-next"></div>\n\t\t\t</div>\n\t\t\t<div class="modal-gallery__footer">\n\t\t\t\t<div class="wrap modal-gallery__footer-inner">\n\t\t\t\t\t<div class="modal-gallery__title"></div>\n\t\t\t\t\t<div class="modal-gallery__paging"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>',l(e));r(o,n)})},truncateText:function(i){var t=function(){for(var t=0;t<i.length;t++){var e=i[t],n=parseInt(getComputedStyle(e).maxHeight,10),o=parseInt(e.offsetHeight,10);shave(e,n||o)}};APP.cache.cutTextListener=APP.throttle(t,100),t(),window.addEventListener("resize",APP.cache.cutTextListener)},lazyload:function(){void 0===APP.myLazyLoad?APP.myLazyLoad=new LazyLoad({elements_selector:".lazyload",callback_error:function(t){t.parentElement.classList.add("lazyload-error")}}):APP.myLazyLoad.update(),APP.objectFitFallback(document.querySelectorAll("[data-object-fit]"))},objectFitFallback:function(t){if("objectFit"in document.documentElement.style==!1){console.log("objectFit Fallback");for(var e=0;e<t.length;e++){var n=t[e],o=n.getAttribute("src"),i=n.getAttribute("data-object-fit"),a=void 0;a="contain"===i?"contain":"cover"===i?"cover":"auto";var l=n.parentElement;o&&(l.style.backgroundImage="url("+o+")",l.style.backgroundSize=a,l.classList.add("fit-img"))}}},svgIcons:function(){var t=document.querySelector("[data-svg-path]"),e=t.getAttribute("data-svg-path"),n=new XMLHttpRequest;n.onload=function(){t.innerHTML=this.responseText},n.open("get",e,!0),n.send()},polyfills:function(){var t;(t=Element.prototype).matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector,t.closest=t.closest||function(t){return this?this.matches(t)?this:this.parentElement?this.parentElement.closest(t):null:null},Element.prototype.hasClass=function(t){return this.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(this.className)}},isBrowserFocus:function(){!function(){var i="hidden";function t(t){var e="visible",n="hidden",o={focus:e,focusin:e,pageshow:e,blur:n,focusout:n,pagehide:n};(t=t||window.event).type in o?document.body.className=o[t.type]:document.body.className=this[i]?"hidden":"visible"}i in document?document.addEventListener("visibilitychange",t):(i="mozHidden")in document?document.addEventListener("mozvisibilitychange",t):(i="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",t):(i="msHidden")in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?document.onfocusin=document.onfocusout=t:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t,void 0!==document[i]&&t({type:document[i]?"blur":"focus"})}()},onBrowserFocus:function(){console.log("focused")},documentOn:function(t,l,r){document.addEventListener(t,function(t){var e,n,o,i,a=(e=t.target,o=(n=l).replace(".",""),i=e.closest(n),e.hasClass(o)?e:i||!1);a&&r.bind(a)(t,a)})},detectIE:function(){!function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(0<e){parseInt(t.substring(e+5,t.indexOf(".",e)),10);document.querySelector("body").className+=" IE"}if(0<t.indexOf("Trident/")){var n=t.indexOf("rv:");parseInt(t.substring(n+3,t.indexOf(".",n)),10);document.querySelector("body").className+=" IE"}var o=t.indexOf("Edge/");if(0<o){parseInt(t.substring(o+5,t.indexOf(".",o)),10);document.querySelector("body").className+=" IE"}}()},getScrollbarSize:function(){var t=void 0;if(void 0===t){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t},throttle:function(t,e){var n=!1;return function(){n||(t.call(),n=!0,setTimeout(function(){n=!1},e))}},getScreenSize:function(){var t=window.getComputedStyle(document.querySelector("body"),":after").getPropertyValue("content");return t=parseInt(t.match(/\d+/))}};APP.initBefore(),document.addEventListener("DOMContentLoaded",function(){APP.init()}),window.onload=function(){APP.initOnLoad()};
//# sourceMappingURL=main.js.map
